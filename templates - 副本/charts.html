{% extends 'base.html' %} {% from 'macros.html' import form_field %} {% block content %}


<div class="tab-content">
    <div class="row content-list-head card-list-head">
        <div class="col-auto">
            <h3>Charts </h3>
        </div>
    </div>
    <div class="tab-pane fade show active" id="tasks" role="tabpanel" data-filter-list="card-list-body">
        <div class="card-list ">
            <div class="row content-list-head card-list-head">
                <div class="col-auto">
                </div>
            </div>
            <div class="card-list-body">
                <div class="card card-task">
                    <div class="progress">
                        <div class="progress-bar {{progress_bg}}" role="progressbar" style="width: {{progress}}%" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"></div>
                    </div>
                    <div class="card-body">
                        <div id="chart1" style="width: 100%;height:400px;"></div>
                    </div>
                </div>
                <div class="card card-task">
                    <div class="progress">
                        <div class="progress-bar {{progress_bg}}" role="progressbar" style="width: {{progress}}%" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"></div>
                    </div>
                    <div class="card-body">
                        <div id="chart2" style="width: 100%;height:400px;"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script type="text/javascript">
    var myChart = echarts.init(document.getElementById('chart1'));
    var data = {
        date: [],
        score: [],
        total: []
    }
    var tmp = 0;
    '{% for day_data in days %}'
    data.date.push('{{day_data.date}}')
    data.score.push('{{day_data.score}}')
    tmp += Number('{{day_data.score}}')
    data.total.push(tmp)
    '{% endfor %}'
    var option = {
        xAxis: {
            type: 'category',
            data: data.date
        },
        yAxis: {
            type: 'value'
        },
        series: [{
            data: data.score,
            smooth: true,
            type: 'line',
        }]
    };

    myChart.setOption(option);


    var myChart = echarts.init(document.getElementById('chart2'));
    var data1 = [];
    '{% for day_data in days %}'
    data1.push([echarts.format.formatTime('yyyy-MM-dd', '{{day_data.date}}'), Number('{{day_data.score}}')])
    '{% endfor %}'

    console.log(data.date)
    console.log(data1)
    option = {
        title: {
            top: 30,
            left: 'center',
            text: '2016年某人每天的步数'
        },
        tooltip: {},
        visualMap: {
            min: -200,
            max: 560,
            type: 'piecewise',
            orient: 'horizontal',
            left: 'center',
            top: 65,
            textStyle: {
                color: '#000'
            }
        },
        calendar: {
            top: 120,
            left: 30,
            right: 30,
            cellSize: ['auto', 'auto'],
            range: '2020-02',
            itemStyle: {
                borderWidth: 0.5
            },
            yearLabel: {
                show: false
            }
        },
        series: {
            type: 'effectScatter',
            symbolSize: function(val) {
                return (val[1] + 100) / 20;
            },
            coordinateSystem: 'calendar',
            data: data1
        }
    };
    myChart.setOption(option);
</script>
{% endblock %}